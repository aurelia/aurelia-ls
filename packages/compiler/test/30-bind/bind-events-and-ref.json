[
  {
    "name": "ER-01 event handler in with overlay",
    "markup": "<div with.bind=\"ctx\"><button @click=\"go(a)\"></button></div>",
    "expect": {
      "frames": [
        { "label": "root", "parent": null, "kind": "root", "overlay": null, "origin": null },
        { "label": "overlay:valueOverlay@1", "parent": "root", "kind": "overlay", "overlay": "value", "origin": "valueOverlay" }
      ],
      "locals": [],
      "exprs": [
        { "kind": "expr", "code": "ctx", "frame": "root" },
        { "kind": "expr", "code": "go(a)", "frame": "overlay:valueOverlay@1" }
      ],
      "diags": []
    }
  },
  {
    "name": "ER-02 ref binding in repeat overlay",
    "markup": "<ul repeat.for=\"i of items\"><li ref=el>${i}</li></ul>",
    "expect": {
      "frames": [
        { "label": "root", "parent": null, "kind": "root", "overlay": null, "origin": null },
        { "label": "overlay:iterator@1", "parent": "root", "kind": "overlay", "overlay": null, "origin": "iterator" }
      ],
      "locals": [
        { "frame": "overlay:iterator@1", "kind": "iteratorLocal", "name": "i" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$index" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$first" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$last" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$even" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$odd" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$length" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$middle" }
      ],
      "exprs": [
        { "kind": "forOfHeader", "frame": "root" },
        { "kind": "expr", "code": "el", "frame": "overlay:iterator@1" },
        { "kind": "expr", "code": "i", "frame": "overlay:iterator@1" }
      ],
      "diags": []
    }
  },
  {
    "name": "ER-03 style.prop binding in with overlay",
    "markup": "<div with.bind=\"ctx\"><span color.style=\"c\"></span></div>",
    "expect": {
      "frames": [
        { "label": "root", "parent": null, "kind": "root", "overlay": null, "origin": null },
        { "label": "overlay:valueOverlay@1", "parent": "root", "kind": "overlay", "overlay": "value", "origin": "valueOverlay" }
      ],
      "locals": [],
      "exprs": [
        { "kind": "expr", "code": "ctx", "frame": "root" },
        { "kind": "expr", "code": "c", "frame": "overlay:valueOverlay@1" }
      ],
      "diags": []
    }
  },
  {
    "name": "ER-04 attribute interpolation in repeat overlay",
    "markup": "<div repeat.for=\"i of items\"><span title=\"a ${b}\"></span></div>",
    "expect": {
      "frames": [
        { "label": "root", "parent": null, "kind": "root", "overlay": null, "origin": null },
        { "label": "overlay:iterator@1", "parent": "root", "kind": "overlay", "overlay": null, "origin": "iterator" }
      ],
      "locals": [
        { "frame": "overlay:iterator@1", "kind": "iteratorLocal", "name": "i" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$index" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$first" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$last" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$even" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$odd" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$length" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$middle" }
      ],
      "exprs": [
        { "kind": "forOfHeader", "frame": "root" },
        { "kind": "expr", "code": "b", "frame": "overlay:iterator@1" }
      ],
      "diags": []
    }
  },
  {
    "name": "ER-05 view-model.ref mapping inside with overlay",
    "markup": "<my-el with.bind=\"ctx\" view-model.ref=\"vm\"></my-el>",
    "expect": {
      "frames": [
        { "label": "root", "parent": null, "kind": "root", "overlay": null, "origin": null },
        { "label": "overlay:valueOverlay@1", "parent": "root", "kind": "overlay", "overlay": "value", "origin": "valueOverlay" }
      ],
      "locals": [],
      "exprs": [
        { "kind": "expr", "code": "ctx", "frame": "root" },
        { "kind": "expr", "code": "vm", "frame": "overlay:valueOverlay@1" }
      ],
      "diags": []
    }
  },
  {
    "name": "ER-06 class.prop binding in with overlay keeps expression semantics",
    "markup": "<div with.bind=\"ctx\"><span active.class=\"active\"></span></div>",
    "expect": {
      "frames": [
        { "label": "root", "parent": null, "kind": "root", "overlay": null, "origin": null },
        { "label": "overlay:valueOverlay@1", "parent": "root", "kind": "overlay", "overlay": "value", "origin": "valueOverlay" }
      ],
      "locals": [],
      "exprs": [
        { "kind": "expr", "code": "ctx", "frame": "root" },
        { "kind": "expr", "code": "active", "frame": "overlay:valueOverlay@1" }
      ],
      "diags": []
    }
  }
]
