[
  {
    "name": "SP-01 switch default-case only (value-less)",
    "markup": "<div switch><template default-case>${a}</template></div>",
    "expect": {
      "frames": [
        { "label": "root", "parent": null, "kind": "root", "overlay": null, "origin": null }
      ],
      "locals": [],
      "exprs": [
        { "kind": "expr", "code": "switch", "frame": "root" },
        { "kind": "expr", "code": "a", "frame": "root" }
      ],
      "diags": []
    }
  },
  {
    "name": "SP-02 two case branches; both case expressions map to root",
    "markup": "<div switch.bind=\"x\"><template case=\"1\"><b>${a}</b></template><template case=\"y\"><i>${b}</i></template></div>",
    "expect": {
      "frames": [
        { "label": "root", "parent": null, "kind": "root", "overlay": null, "origin": null }
      ],
      "locals": [],
      "exprs": [
        { "kind": "expr", "code": "x", "frame": "root" },
        { "kind": "expr", "code": "\"1\"", "frame": "root" },
        { "kind": "expr", "code": "a", "frame": "root" },
        { "kind": "expr", "code": "\"y\"", "frame": "root" },
        { "kind": "expr", "code": "b", "frame": "root" }
      ],
      "diags": []
    }
  },
  {
    "name": "SP-03 portal inside with reuses with overlay",
    "markup": "<div with.bind=\"ctx\"><section portal><i>${z}</i></section></div>",
    "expect": {
      "frames": [
        { "label": "root", "parent": null, "kind": "root", "overlay": null, "origin": null },
        { "label": "overlay:valueOverlay@1", "parent": "root", "kind": "overlay", "overlay": "value", "origin": "valueOverlay" }
      ],
      "locals": [],
      "exprs": [
        { "kind": "expr", "code": "ctx", "frame": "root" },
        { "kind": "expr", "code": "portal", "frame": "overlay:valueOverlay@1" },
        { "kind": "expr", "code": "z", "frame": "overlay:valueOverlay@1" }
      ],
      "diags": []
    }
  },
  {
    "name": "SP-04 if inside repeat reuses repeat overlay",
    "markup": "<ul repeat.for=\"i of items\"><li if.bind=\"cond\">${i}</li></ul>",
    "expect": {
      "frames": [
        { "label": "root", "parent": null, "kind": "root", "overlay": null, "origin": null },
        { "label": "overlay:iterator@1", "parent": "root", "kind": "overlay", "overlay": null, "origin": "iterator" }
      ],
      "locals": [
        { "frame": "overlay:iterator@1", "kind": "iteratorLocal", "name": "i" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$index" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$first" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$last" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$even" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$odd" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$length" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$middle" },
        { "frame": "overlay:iterator@1", "kind": "contextual", "name": "$previous" }
      ],
      "exprs": [
        { "kind": "forOfHeader", "frame": "root" },
        { "kind": "expr", "code": "cond", "frame": "overlay:iterator@1" },
        { "kind": "expr", "code": "i", "frame": "overlay:iterator@1" }
      ],
      "diags": []
    }
  }
]
